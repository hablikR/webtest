import{a as D}from"./chunk-V65V73VI.js";import{a as y}from"./chunk-HZVRNTYT.js";import{a as h}from"./chunk-MBNI54N7.js";import{p as B}from"./chunk-K3Y7AD3F.js";import{b as T}from"./chunk-3UPXX735.js";import"./chunk-4TVBHNPA.js";import{b as O,d as R,e as V,i as A,l as F}from"./chunk-LX77AVSX.js";import"./chunk-LXQEOFZE.js";import"./chunk-P6SJ7GHW.js";import"./chunk-6DUW2QES.js";import{i as I}from"./chunk-E4AQRK7M.js";import{c as k}from"./chunk-VJOKG5MU.js";import{Ca as _,Cb as L,Da as u,Dc as a,Ec as l,Hb as x,Pb as M,Ub as C,Yb as o,Zb as e,_b as w,cc as S,d as f,ec as b,fc as d,pc as g,qa as P,qb as n,qc as r,rc as m,sc as E}from"./chunk-3EUR7DBE.js";function H(t,s){t&1&&w(0,"mat-spinner")}function G(t,s){t&1&&(o(0,"p"),r(1),a(2,"translate"),e()),t&2&&(n(),E(" ",l(2,1,"login.checkEmail"),""))}function q(t,s){if(t&1){let i=S();o(0,"h1"),r(1,"Login"),e(),o(2,"mat-form-field",3)(3,"mat-label"),r(4,"Email"),e(),w(5,"input",4,0),e(),o(7,"mat-form-field",3)(8,"mat-label"),r(9,"Password"),e(),w(10,"input",5,1),e(),o(12,"button",6),b("click",function(){_(i);let c=g(6),v=g(11),j=d();return u(j.login(c.value,v.value))}),r(13),a(14,"translate"),e(),o(15,"p"),r(16),a(17,"translate"),e(),o(18,"button",6),b("click",function(){_(i);let c=d();return u(c.registration())}),r(19),a(20,"translate"),e(),o(21,"p"),r(22),a(23,"translate"),e(),o(24,"button",7),b("click",function(){_(i);let c=g(6),v=d();return u(v.resetPassword(c.value))}),r(25),a(26,"translate"),e(),x(27,G,3,3,"p")}if(t&2){let i=g(6),p=d();n(13),m(l(14,7,"login.login")),n(3),E("",l(17,9,"login.registrationText")," "),n(3),m(l(20,11,"login.registrationButton")),n(3),m(l(23,13,"login.resetPasswordHint")),n(2),M("disabled",i.value===""),n(),m(l(26,15,"login.resetPassword")),n(2),C(p.isPasswordRestored?27:-1)}}function z(t,s){t&1&&(o(0,"mat-error"),r(1),a(2,"translate"),e()),t&2&&(n(),m(l(2,1,"login.error")))}var N=class t{router=P(T);store=P(B);hasError=this.store.select(y.selectHasError);isLoading=this.store.select(y.selectIsLoading);isPasswordRestored=!1;login(s,i){return f(this,null,function*(){this.store.dispatch(h.login({email:s,password:btoa(i)}))})}registration(){return f(this,null,function*(){yield this.router.navigate(["/registration"])})}resetPassword(s){return f(this,null,function*(){this.isPasswordRestored=!0,this.store.dispatch(h.resetPassword({email:s}))})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=L({type:t,selectors:[["app-login"]],decls:6,vars:6,consts:[["email",""],["pass",""],[1,"login-form"],[1,"form-field"],["matInput",""],["matInput","","type","password"],["type","button","mat-flat-button","",1,"reg-button",3,"click"],["type","button","mat-flat-button","",1,"reg-button",3,"click","disabled"]],template:function(i,p){i&1&&(o(0,"form",2),x(1,H,1,0,"mat-spinner"),a(2,"async"),x(3,q,28,17)(4,z,3,3,"mat-error"),a(5,"async"),e()),i&2&&(n(),C(l(2,2,p.isLoading)?1:3),n(3),C(l(5,4,p.hasError)?4:-1))},dependencies:[O,k,A,R,F,V,I,D],styles:[".login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%;justify-content:center}.login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.login-form[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:flex}.visible[_ngcontent-%COMP%]{display:block}.hidden[_ngcontent-%COMP%]{display:none}"]})};export{N as LoginComponent};
