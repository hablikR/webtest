import{a as W}from"./chunk-V65V73VI.js";import{a as y}from"./chunk-HZVRNTYT.js";import{c as A}from"./chunk-MBNI54N7.js";import{p as B}from"./chunk-K3Y7AD3F.js";import{a as Z}from"./chunk-PVUJVQAN.js";import"./chunk-3RK6DDJD.js";import{b as L}from"./chunk-QHEE6FC6.js";import{b as q,d as z,e as D,f as U,i as $,l as j}from"./chunk-LX77AVSX.js";import"./chunk-LXQEOFZE.js";import{b as H,d as l,f as I,i as P,l as N,n as V}from"./chunk-P6SJ7GHW.js";import"./chunk-6DUW2QES.js";import{i as F}from"./chunk-E4AQRK7M.js";import{c as k}from"./chunk-VJOKG5MU.js";import{Ca as M,Cb as R,Da as E,Dc as n,Ec as o,Hb as C,Pb as s,Ub as m,Yb as c,Zb as p,_b as _,cc as O,d as b,ec as T,fc as h,ob as f,pc as u,qa as x,qb as i,qc as g,rc as w,sc as S}from"./chunk-3EUR7DBE.js";function J(e,t){e&1&&_(0,"mat-spinner")}function K(e,t){e&1&&(c(0,"mat-error",5),g(1),n(2,"translate"),p()),e&2&&(i(),w(o(2,1,"login.registration.password.invalid")))}function Q(e,t){e&1&&(_(0,"mat-error",4),n(1,"translate")),e&2&&s("innerHTML",o(1,1,"login.registration.password.empty"),f)}function X(e,t){e&1&&(c(0,"mat-error"),g(1),n(2,"translate"),p()),e&2&&(i(),w(o(2,1,"login.registration.rePassword.invalid")))}function Y(e,t){e&1&&(_(0,"mat-error",4),n(1,"translate")),e&2&&s("innerHTML",o(1,1,"login.registration.rePassword.empty"),f)}function ee(e,t){e&1&&(_(0,"mat-error",4),n(1,"translate")),e&2&&s("innerHTML",o(1,1,"login.registration.rePassword.pageError"),f)}function te(e,t){if(e&1){let a=O();c(0,"mat-form-field",2)(1,"mat-label"),g(2),n(3,"translate"),p(),c(4,"input",3,0),T("blur",function(){M(a);let r=u(5),v=h();return E(v.onBlur(r.value))}),p(),_(6,"mat-hint",4),n(7,"translate"),C(8,K,3,3,"mat-error",5)(9,Q,2,3,"mat-error",4),p(),c(10,"mat-form-field",2)(11,"mat-label"),g(12),n(13,"translate"),p(),_(14,"input",6,1)(16,"mat-hint",4),n(17,"translate"),C(18,X,3,3,"mat-error")(19,Y,2,3,"mat-error",4),p(),c(20,"button",7),T("click",function(){M(a);let r=u(5),v=h();return E(v.onClick(r.value))}),g(21),n(22,"translate"),p(),C(23,ee,2,3,"mat-error",4),n(24,"async")}if(e&2){let a=u(5),d=u(15),r=h();i(2),w(o(3,15,"login.registration.rePassword.label")),i(2),s("formControl",r.passwordFormControl)("errorStateMatcher",r.matcher),i(2),s("innerHTML",o(7,17,"login.registration.password.hint"),f),i(2),m(r.passwordFormControl.hasError("minLength")||r.passwordFormControl.hasError("pattern")&&!r.passwordFormControl.hasError("required")?8:-1),i(),m(r.passwordFormControl.hasError("required")?9:-1),i(3),w(o(13,19,"login.registration.rePassword.repeatLabel")),i(2),s("formControl",r.repeatPasswordFormControl)("errorStateMatcher",r.matcher),i(2),s("innerHTML",o(17,21,"login.registration.rePassword.hint"),f),i(2),m(r.repeatPasswordFormControl.hasError("pattern")&&!r.repeatPasswordFormControl.hasError("required")?18:-1),i(),m(r.repeatPasswordFormControl.hasError("required")?19:-1),i(),s("disabled",a.value===""||d.value===""||r.passwordFormControl.invalid||r.repeatPasswordFormControl.invalid),i(),S("",o(22,23,"login.registration.button")," "),i(2),m(o(24,25,r.hasError$)?23:-1)}}var G=class e{store=x(B);PATTERN_LOWERCASE=/[a-z]/;PATTERN_UPPERCASE=/[A-Z]/;PATTERN_NUMBER=/[0-9]/;registrationService=x(L);access_token;refresh_token;isLoading$=this.store.select(y.selectIsLoading);hasError$=this.store.select(y.selectHasError);matcher=new Z;passwordFormControl=new P("",[l.required,l.minLength(8),l.pattern(this.PATTERN_LOWERCASE),l.pattern(this.PATTERN_UPPERCASE),l.pattern(this.PATTERN_NUMBER)]);repeatPasswordFormControl=new P("",[l.required]);onBlur(t){this.repeatPasswordFormControl=new P("",[l.required,l.pattern(t)])}ngOnInit(){let t=window.location.href,a=t.substring(0,t.indexOf("#")),d=window.location.hash;this.access_token=this.getValue(d);let r=t.substring(t.indexOf("refresh_token="));this.refresh_token=this.getValue(r)}onClick(t){return b(this,null,function*(){this.store.dispatch(A.updatePassword({accessToken:this.access_token,refreshToken:this.refresh_token,password:t}))})}getValue(t){return t.substring(t.indexOf("=")+1,t.indexOf("&"))}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=R({type:e,selectors:[["app-reset-password"]],decls:3,vars:3,consts:[["password",""],["repeatPassword",""],[1,"password-reset"],["type","password","matInput","",3,"blur","formControl","errorStateMatcher"],[3,"innerHTML"],[1,"pass-error"],["type","password","matInput","",3,"formControl","errorStateMatcher"],["type","button","mat-flat-button","",1,"submit-button",3,"click","disabled"]],template:function(a,d){a&1&&(C(0,J,1,0,"mat-spinner"),n(1,"async"),C(2,te,25,27)),a&2&&m(o(1,1,d.isLoading$)?0:2)},dependencies:[U,z,D,$,k,V,H,I,N,j,q,W,F],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;justify-content:center}[_nghost-%COMP%]   .password-reset[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}[_nghost-%COMP%]   .pass-error[_ngcontent-%COMP%]{line-break:auto}[_nghost-%COMP%]   .form-full-width[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .submit-button[_ngcontent-%COMP%]{margin-top:16px}.reg-info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.reg-info-container[_ngcontent-%COMP%]   .reg-message[_ngcontent-%COMP%]{margin-top:32px}.reg-info-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{justify-content:center}"]})};export{G as ResetPasswordComponent};
