import{a as M}from"./chunk-QOAPYNOX.js";import{d as L}from"./chunk-YFHV7OTD.js";import{a as T,b as j,e as A,f as P,g as R}from"./chunk-5IEPR3S6.js";import"./chunk-I5FNOHLO.js";import{a as E}from"./chunk-O2TX7JXO.js";import"./chunk-ZSSD5RUB.js";import"./chunk-2VGXQN2N.js";import{c as k}from"./chunk-OK4I3DW5.js";import{Gb as b,Hb as o,Ib as x,Jb as h,Lb as p,Mb as c,Pa as m,Ta as d,Za as C,_ as w,d as s,da as l,la as g,ma as u,qb as n,r as _,rb as t,sb as v,tb as y,vb as S}from"./chunk-IX7ID3YI.js";var f=class r{constructor(i,e,a){this.http=i;this.apiService=e;this.userService=a}login(i,e){return s(this,null,function*(){console.log("login request send");let a=yield _(this.http.post(this.apiService.getApiUrl()+"/login",{email:i,password:e}));return this.userService.saveAccessToken(a.session.access_token),a})}static \u0275fac=function(e){return new(e||r)(l(E),l(R),l(M))};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})};var V=class r{constructor(i,e){this.router=i;this.loginService=e}login(i,e){return s(this,null,function*(){yield this.loginService.login(i,btoa(e)),localStorage.getItem("access_token")})}registration(){return s(this,null,function*(){console.log("on click"),yield this.router.navigate(["/registration"])})}static \u0275fac=function(e){return new(e||r)(d(L),d(f))};static \u0275cmp=C({type:r,selectors:[["app-login"]],decls:22,vars:9,consts:[["email",""],["pass",""],[1,"login-form"],[1,"form-field"],["matInput",""],["matInput","","type","password"],["type","button","mat-flat-button","",1,"reg-button",3,"click"]],template:function(e,a){if(e&1){let I=y();n(0,"form",2)(1,"h1"),o(2,"Login"),t(),n(3,"mat-form-field",3)(4,"mat-label"),o(5,"Email"),t(),v(6,"input",4,0),t(),n(8,"mat-form-field",3)(9,"mat-label"),o(10,"Password"),t(),v(11,"input",5,1),t(),n(13,"button",6),S("click",function(){g(I);let F=b(7),O=b(12);return u(a.login(F.value,O.value))}),o(14),p(15,"translate"),t(),n(16,"p"),o(17),p(18,"translate"),t(),n(19,"button",6),S("click",function(){return g(I),u(a.registration())}),o(20),p(21,"translate"),t()()}e&2&&(m(14),x(c(15,3,"login.login")),m(3),h("",c(18,5,"login.registrationText")," "),m(3),x(c(21,7,"login.registrationButton")))},dependencies:[T,k,A,j,P],styles:[".login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}"]})};export{V as LoginComponent};
