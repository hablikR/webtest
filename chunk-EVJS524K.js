import{a as D}from"./chunk-QXSCII7F.js";import{a as z}from"./chunk-PVUJVQAN.js";import"./chunk-YFRVRHD6.js";import{a as x,d as H,e as I,f as L,i as V,l as q}from"./chunk-YSNIN4HR.js";import{ga as k,ia as o,ka as A,na as C,qa as B,sa as N}from"./chunk-46W3ERFE.js";import"./chunk-HDMGEMDO.js";import"./chunk-T3Q3DASN.js";import"./chunk-AENSBALD.js";import{c as S}from"./chunk-FE7WWTQP.js";import{$b as l,Da as P,Db as T,Ea as v,Ic as s,Jb as M,Jc as p,Sb as a,Xb as g,ac as i,bc as u,d as y,fc as O,ic as E,pb as f,ra as R,rb as n,uc as w,vc as d,wc as b,xc as F}from"./chunk-MQCPACV7.js";function j(r,e){r&1&&(l(0,"mat-error",5),d(1),s(2,"translate"),i()),r&2&&(n(),b(p(2,1,"login.registration.password.invalid")))}function W(r,e){r&1&&(u(0,"mat-error",4),s(1,"translate")),r&2&&a("innerHTML",p(1,1,"login.registration.password.empty"),f)}function Z(r,e){r&1&&(l(0,"mat-error"),d(1),s(2,"translate"),i()),r&2&&(n(),b(p(2,1,"login.registration.rePassword.invalid")))}function G(r,e){r&1&&(u(0,"mat-error",4),s(1,"translate")),r&2&&a("innerHTML",p(1,1,"login.registration.rePassword.empty"),f)}var U=class r{PATTERN_LOWERCASE=/[a-z]/;PATTERN_UPPERCASE=/[A-Z]/;PATTERN_NUMBER=/[0-9]/;registrationService=R(D);access_token;refresh_token;matcher=new z;passwordFormControl=new C("",[o.required,o.minLength(8),o.pattern(this.PATTERN_LOWERCASE),o.pattern(this.PATTERN_UPPERCASE),o.pattern(this.PATTERN_NUMBER)]);repeatPasswordFormControl=new C("",[o.required]);onBlur(e){this.repeatPasswordFormControl=new C("",[o.required,o.pattern(e)])}ngOnInit(){let e=window.location.href,c=e.substring(0,e.indexOf("#")),t=window.location.hash;this.access_token=this.getValue(t);let m=e.substring(e.indexOf("refresh_token="));this.refresh_token=this.getValue(m)}onClick(e){return y(this,null,function*(){yield this.registrationService.updatePassword(this.access_token,this.refresh_token,e)})}getValue(e){return e.substring(e.indexOf("=")+1,e.indexOf("&"))}static \u0275fac=function(c){return new(c||r)};static \u0275cmp=T({type:r,selectors:[["app-reset-password"]],decls:21,vars:18,consts:[["password",""],["repeatPassword",""],[1,"reg-field"],["type","password","matInput","",3,"blur","formControl","errorStateMatcher"],[3,"innerHTML"],[1,"pass-error"],["type","password","matInput","",3,"formControl","errorStateMatcher"],["type","button","mat-flat-button","",1,"submit-button",3,"click","disabled"]],template:function(c,t){if(c&1){let m=O();l(0,"mat-form-field",2)(1,"mat-label"),d(2,"Password"),i(),l(3,"input",3,0),E("blur",function(){P(m);let h=w(4);return v(t.onBlur(h.value))}),i(),u(5,"mat-hint",4),s(6,"translate"),M(7,j,3,3,"mat-error",5)(8,W,2,3,"mat-error",4),i(),l(9,"mat-form-field",2)(10,"mat-label"),d(11,"Repeat password"),i(),u(12,"input",6,1)(14,"mat-hint",4),s(15,"translate"),M(16,Z,3,3,"mat-error")(17,G,2,3,"mat-error",4),i(),l(18,"button",7),E("click",function(){P(m);let h=w(4);return v(t.onClick(h.value))}),d(19),s(20,"translate"),i()}if(c&2){let m=w(4),_=w(13);n(3),a("formControl",t.passwordFormControl)("errorStateMatcher",t.matcher),n(2),a("innerHTML",p(6,12,"login.registration.password.hint"),f),n(2),g(t.passwordFormControl.hasError("minLength")||t.passwordFormControl.hasError("pattern")&&!t.passwordFormControl.hasError("required")?7:-1),n(),g(t.passwordFormControl.hasError("required")?8:-1),n(4),a("formControl",t.repeatPasswordFormControl)("errorStateMatcher",t.matcher),n(2),a("innerHTML",p(15,14,"login.registration.rePassword.hint"),f),n(2),g(t.repeatPasswordFormControl.hasError("pattern")&&!t.repeatPasswordFormControl.hasError("required")?16:-1),n(),g(t.repeatPasswordFormControl.hasError("required")?17:-1),n(),a("disabled",m.value===""||_.value===""||t.passwordFormControl.invalid||t.repeatPasswordFormControl.invalid),n(),F("",p(20,16,"login.registration.button"),`
`)}},dependencies:[L,H,I,V,S,N,k,A,B,q,x],styles:[".registration-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.registration-form[_ngcontent-%COMP%]   .reg-field[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.registration-form[_ngcontent-%COMP%]   .pass-error[_ngcontent-%COMP%]{line-break:auto}.registration-form[_ngcontent-%COMP%]   .form-full-width[_ngcontent-%COMP%]{width:100%}.registration-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{margin-top:16px}.reg-info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.reg-info-container[_ngcontent-%COMP%]   .reg-message[_ngcontent-%COMP%]{margin-top:32px}.reg-info-container[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{justify-content:center}"]})};export{U as ResetPasswordComponent};
