import{a as O}from"./chunk-LFWNXZWQ.js";import{a as Q}from"./chunk-PVUJVQAN.js";import{a as D,c as W,d as G,e as Z,h as J,k as K}from"./chunk-KIUBQMZH.js";import{$ as U,R as q,T as p,V,W as k,Y as w,Z as z,ba as j}from"./chunk-7Y6E6YXH.js";import{c as N}from"./chunk-ASBH376T.js";import"./chunk-4TDNJBFX.js";import"./chunk-RYBYQTDL.js";import{c as L}from"./chunk-H7WWNM4O.js";import{$b as H,Bb as A,Bc as a,Ca as T,Cc as l,Da as S,Hb as v,Qb as s,Ub as f,Xb as m,Yb as o,Zb as C,cc as y,d as h,ec as E,hc as B,ka as F,ob as g,oc as u,pa as P,pc as d,qa as b,qb as i,qc as x,rc as I,u as R}from"./chunk-HUW5QELF.js";var M=class t{constructor(r,n){this.http=r;this.apiService=n}createUser(r,n){return h(this,null,function*(){let c=yield R(this.http.post(this.apiService.getApiUrl()+"/registration",{email:r,password:n}));return console.log(c),c})}static \u0275fac=function(n){return new(n||t)(P(N),P(O))};static \u0275prov=F({token:t,factory:t.\u0275fac,providedIn:"root"})};function tt(t,r){t&1&&(m(0,"mat-error"),d(1),a(2,"translate"),o()),t&2&&(i(),x(l(2,1,"login.registration.email.invalid")))}function et(t,r){t&1&&(C(0,"mat-error",6),a(1,"translate")),t&2&&s("innerHTML",l(1,1,"login.registration.email.error"),g)}function it(t,r){t&1&&(m(0,"mat-error",8),d(1),a(2,"translate"),o()),t&2&&(i(),x(l(2,1,"login.registration.password.invalid")))}function rt(t,r){t&1&&(C(0,"mat-error",6),a(1,"translate")),t&2&&s("innerHTML",l(1,1,"login.registration.password.empty"),g)}function nt(t,r){t&1&&(m(0,"mat-error"),d(1),a(2,"translate"),o()),t&2&&(i(),x(l(2,1,"login.registration.rePassword.invalid")))}function ot(t,r){t&1&&(C(0,"mat-error",6),a(1,"translate")),t&2&&s("innerHTML",l(1,1,"login.registration.rePassword.empty"),g)}function at(t,r){if(t&1){let n=H();m(0,"form",3)(1,"mat-form-field",4)(2,"mat-label"),d(3,"Email"),o(),C(4,"input",5,0),a(6,"translate"),C(7,"mat-hint",6),a(8,"translate"),v(9,tt,3,3,"mat-error")(10,et,2,3,"mat-error",6),o(),m(11,"mat-form-field",4)(12,"mat-label"),d(13,"Password"),o(),m(14,"input",7,1),y("blur",function(){T(n);let _=u(15),e=E();return S(e.onBlur(_.value))}),o(),C(16,"mat-hint",6),a(17,"translate"),v(18,it,3,3,"mat-error",8)(19,rt,2,3,"mat-error",6),o(),m(20,"mat-form-field",4)(21,"mat-label"),d(22,"Repeat password"),o(),C(23,"input",9,2)(25,"mat-hint",6),a(26,"translate"),v(27,nt,3,3,"mat-error")(28,ot,2,3,"mat-error",6),o(),m(29,"button",10),y("click",function(){T(n);let _=u(5),e=u(15),Y=E();return S(Y.onClick(_.value,e.value))}),d(30),a(31,"translate"),o()()}if(t&2){let n=u(5),c=u(15),_=u(24),e=E();i(4),B("placeholder",l(6,18,"login.registration.email.example")),s("formControl",e.emailFormControl)("errorStateMatcher",e.matcher),i(3),s("innerHTML",l(8,20,"login.registration.email.hint"),g),i(2),f(e.emailFormControl.hasError("email")&&!e.emailFormControl.hasError("required")?9:-1),i(),f(e.emailFormControl.hasError("required")?10:-1),i(4),s("formControl",e.passwordFormControl)("errorStateMatcher",e.matcher),i(2),s("innerHTML",l(17,22,"login.registration.password.hint"),g),i(2),f(e.passwordFormControl.hasError("minLength")||e.passwordFormControl.hasError("pattern")&&!e.passwordFormControl.hasError("required")?18:-1),i(),f(e.passwordFormControl.hasError("required")?19:-1),i(4),s("formControl",e.repeatPasswordFormControl)("errorStateMatcher",e.matcher),i(2),s("innerHTML",l(26,24,"login.registration.rePassword.hint"),g),i(2),f(e.repeatPasswordFormControl.hasError("pattern")&&!e.repeatPasswordFormControl.hasError("required")?27:-1),i(),f(e.repeatPasswordFormControl.hasError("required")?28:-1),i(),s("disabled",n.value===""||c.value===""||_.value===""||e.passwordFormControl.invalid||e.emailFormControl.invalid||e.repeatPasswordFormControl.invalid),i(),I("",l(31,26,"login.registration.button")," ")}}function lt(t,r){t&1&&(m(0,"div"),d(1,"Waiting..."),o())}var X=class t{registrationService=b(M);PATTERN_LOWERCASE=/[a-z]/;PATTERN_UPPERCASE=/[A-Z]/;PATTERN_NUMBER=/[0-9]/;emailFormControl=new w("",[p.required,p.email]);passwordFormControl=new w("",[p.required,p.minLength(8),p.pattern(this.PATTERN_LOWERCASE),p.pattern(this.PATTERN_UPPERCASE),p.pattern(this.PATTERN_NUMBER)]);repeatPasswordFormControl=new w("",[p.required]);matcher=new Q;submitted=!1;onBlur(r){this.repeatPasswordFormControl=new w("",[p.required,p.pattern(r)])}onClick(r,n){return h(this,null,function*(){this.submitted=!0,yield this.registrationService.createUser(r,btoa(n))})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=A({type:t,selectors:[["app-registration"]],decls:2,vars:1,consts:[["email",""],["password",""],["repeatPassword",""],[1,"registration-form"],[1,"reg-field"],["type","email","matInput","",3,"formControl","errorStateMatcher","placeholder"],[3,"innerHTML"],["type","password","matInput","",3,"blur","formControl","errorStateMatcher"],[1,"pass-error"],["type","password","matInput","",3,"formControl","errorStateMatcher"],["type","button","mat-flat-button","",1,"submit-button",3,"click","disabled"]],template:function(n,c){n&1&&v(0,at,32,28,"form",3)(1,lt,2,0,"div"),n&2&&f(c.submitted?1:0)},dependencies:[K,j,z,q,V,k,U,W,J,Z,G,L,D],styles:[".registration-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.registration-form[_ngcontent-%COMP%]   .reg-field[_ngcontent-%COMP%]{min-width:150px;max-width:500px;width:100%}.registration-form[_ngcontent-%COMP%]   .pass-error[_ngcontent-%COMP%]{line-break:auto}.registration-form[_ngcontent-%COMP%]   .form-full-width[_ngcontent-%COMP%]{width:100%}.registration-form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{margin-top:16px}"]})};export{X as RegistrationComponent};
